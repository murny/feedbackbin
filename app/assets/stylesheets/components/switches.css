/* ==========================================================================
   Switch Component

   A toggle switch built from a checkbox with role="switch".

   Usage:
     <input type="checkbox" role="switch">
   ========================================================================== */

@layer components {
  input[type='checkbox'][role='switch'] {
    /* Component API */
    --switch-width: 2rem;
    --switch-height: 1.15rem;
    --switch-thumb-size: 1rem;

    /* Structure */
    appearance: none;
    display: inline-flex;
    align-items: center;
    inline-size: var(--switch-width);
    block-size: var(--switch-height);
    flex-shrink: 0;

    /* Appearance */
    background-color: var(--color-input);
    border: 1px solid transparent;
    border-radius: 9999px;
    box-shadow: var(--shadow-xs);

    /* Behavior */
    outline: none;
    transition: all var(--duration-fast) var(--ease-out);

    &::before {
      content: '';
      display: block;
      inline-size: var(--switch-thumb-size);
      block-size: var(--switch-thumb-size);
      background-color: var(--color-background);
      border-radius: 50%;
      box-shadow: none;
      pointer-events: none;
      transition: all var(--duration-fast) var(--ease-out);
    }

    &:focus-visible {
      border-color: var(--color-ring);
      box-shadow: 0 0 0 2px oklch(from var(--color-ring) l c h / 40%);
    }

    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    &:checked {
      background-color: var(--color-primary);
    }

    &:checked::before {
      margin-inline-start: 0.875rem;
    }

    html[data-theme="dark"] & {
      background-color: oklch(from var(--color-input) l c h / 80%);

      &::before {
        background-color: var(--color-foreground);
      }

      &:checked {
        background-color: var(--color-primary);
      }

      &:checked::before {
        background-color: var(--color-primary-foreground);
      }
    }

    @media (prefers-color-scheme: dark) {
      html:not([data-theme]) & {
        background-color: oklch(from var(--color-input) l c h / 80%);

        &::before {
          background-color: var(--color-foreground);
        }

        &:checked {
          background-color: var(--color-primary);
        }

        &:checked::before {
          background-color: var(--color-primary-foreground);
        }
      }
    }
  }
}

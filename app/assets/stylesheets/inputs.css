/* ==========================================================================
   Text Input & Textarea Components

   Usage:
     <input type="text">
     <input type="email">
     <textarea></textarea>

   Note: All form elements inside .form are styled automatically.
   For standalone elements, use .input, .textarea classes.
   ========================================================================== */

@layer components {
  /* Text Inputs
  /* ------------------------------------------------------------------------ */

  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  input[type='file'],
  input[type='tel'],
  input[type='url'],
  input[type='search'],
  input[type='date'],
  input[type='datetime-local'],
  input[type='month'],
  input[type='week'],
  input[type='time'],
  .input {
    /* Component API */
    --input-height: 2.25rem;
    --input-padding-inline: 0.75rem;
    --input-padding-block: 0.25rem;
    --input-radius: var(--radius-md);
    --input-border-color: var(--color-input);
    --input-background: transparent;
    --input-shadow: var(--shadow-xs);

    /* Structure */
    appearance: none;
    display: flex;
    block-size: var(--input-height);
    inline-size: 100%;
    min-inline-size: 0;
    padding-inline: var(--input-padding-inline);
    padding-block: var(--input-padding-block);

    /* Appearance */
    background-color: var(--input-background);
    border: 1px solid var(--input-border-color);
    border-radius: var(--input-radius);
    box-shadow: var(--input-shadow);

    /* Typography */
    font-size: var(--text-base);
    color: var(--color-foreground);

    /* Behavior */
    outline: none;
    transition: color var(--duration-fast) var(--ease-out),
                box-shadow var(--duration-fast) var(--ease-out),
                border-color var(--duration-fast) var(--ease-out);

    @media (min-width: 768px) {
      font-size: var(--text-sm);
    }

    /* Placeholder */
    &::placeholder {
      color: var(--color-muted-foreground);
    }

    /* Selection */
    &::selection {
      background-color: var(--color-primary);
      color: var(--color-primary-foreground);
    }

    /* File input */
    &::file-selector-button {
      display: inline-flex;
      block-size: 1.75rem;
      border: none;
      background-color: transparent;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      color: var(--color-foreground);
    }

    /* Focus state */
    &:focus-visible {
      border-color: var(--color-ring);
      box-shadow: 0 0 0 2px oklch(from var(--color-ring) l c h / 40%);
    }

    /* Invalid state */
    &:user-invalid,
    &[aria-invalid="true"] {
      border-color: var(--color-destructive);
      box-shadow: 0 0 0 2px oklch(from var(--color-destructive) l c h / 20%);
    }

    /* Disabled state */
    &:disabled {
      pointer-events: none;
      cursor: not-allowed;
      opacity: 0.5;
    }

    /* Dark mode */
    html[data-theme="dark"] & {
      background-color: oklch(from var(--color-input) l c h / 30%);
    }

    @media (prefers-color-scheme: dark) {
      html:not([data-theme]) & {
        background-color: oklch(from var(--color-input) l c h / 30%);
      }
    }
  }

  /* Textarea
  /* ------------------------------------------------------------------------ */

  textarea,
  .textarea {
    /* Component API */
    --textarea-min-height: 4rem;
    --textarea-padding-inline: 0.75rem;
    --textarea-padding-block: 0.5rem;
    --textarea-radius: var(--radius-md);
    --textarea-border-color: var(--color-input);

    /* Structure */
    display: flex;
    field-sizing: content;
    min-block-size: var(--textarea-min-height);
    inline-size: 100%;
    padding-inline: var(--textarea-padding-inline);
    padding-block: var(--textarea-padding-block);

    /* Appearance */
    background-color: transparent;
    border: 1px solid var(--textarea-border-color);
    border-radius: var(--textarea-radius);
    box-shadow: var(--shadow-xs);

    /* Typography */
    font-size: var(--text-base);
    color: var(--color-foreground);

    /* Behavior */
    outline: none;
    transition: color var(--duration-fast) var(--ease-out),
                box-shadow var(--duration-fast) var(--ease-out),
                border-color var(--duration-fast) var(--ease-out);

    @media (min-width: 768px) {
      font-size: var(--text-sm);
    }

    &::placeholder {
      color: var(--color-muted-foreground);
    }

    &:focus-visible {
      border-color: var(--color-ring);
      box-shadow: 0 0 0 2px oklch(from var(--color-ring) l c h / 40%);
    }

    &:user-invalid,
    &[aria-invalid="true"] {
      border-color: var(--color-destructive);
      box-shadow: 0 0 0 2px oklch(from var(--color-destructive) l c h / 20%);
    }

    &:disabled {
      pointer-events: none;
      cursor: not-allowed;
      opacity: 0.5;
    }

    html[data-theme="dark"] & {
      background-color: oklch(from var(--color-input) l c h / 30%);
    }

    @media (prefers-color-scheme: dark) {
      html:not([data-theme]) & {
        background-color: oklch(from var(--color-input) l c h / 30%);
      }
    }
  }
}

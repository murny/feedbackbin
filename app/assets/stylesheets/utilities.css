/* ==========================================================================
   Utility Classes

   Keep this lean — prefer component/module classes for specific styling.
   ========================================================================== */

@layer utilities {
  /* ==========================================================================
     Text
     ========================================================================== */
  .txt-xx-small { font-size: var(--text-xx-small); }
  .txt-x-small { font-size: var(--text-x-small); }
  .txt-small { font-size: var(--text-small); }
  .txt-normal { font-size: var(--text-normal); }
  .txt-medium { font-size: var(--text-medium); }
  .txt-large { font-size: var(--text-large); }
  .txt-x-large { font-size: var(--text-x-large); }
  .txt-xx-large { font-size: var(--text-xx-large); }

  .txt-align-center { text-align: center; }
  .txt-align-start { text-align: start; }
  .txt-align-end { text-align: end; }

  .txt-current { color: currentColor; }
  .txt-ink { color: var(--color-ink); }
  .txt-reversed { color: var(--color-ink-inverted); }
  .txt-negative { color: var(--color-negative); }
  .txt-positive { color: var(--color-positive); }
  .txt-subtle { color: var(--color-ink-dark); }
  .txt-alert { color: var(--color-marker); }
  .txt-primary { color: var(--color-primary); }
  .txt-link { color: var(--color-link); text-decoration: underline; }
  .txt-subtle-link { color: var(--color-ink-dark); &:hover { color: var(--color-foreground); } }
  .txt-undecorated { text-decoration: none; }
  .txt-underline { text-decoration: underline; }
  .txt-tight-lines { line-height: 1.2; }
  .txt-nowrap { white-space: nowrap; }
  .txt-balance { text-wrap: balance; }
  .txt-break { word-break: break-word; }
  .txt-uppercase { text-transform: uppercase; }
  .txt-capitalize { text-transform: capitalize; }
  .txt-capitalize-first-letter::first-letter { text-transform: capitalize; }

  .font-weight-normal { font-weight: normal; }
  .font-weight-medium { font-weight: 500; }
  .font-weight-semibold { font-weight: 600; }
  .font-weight-bold { font-weight: bold; }
  .font-weight-black { font-weight: 900; }

  /* ==========================================================================
     Flexbox and Grid
     ========================================================================== */
  .justify-end { justify-content: end; }
  .justify-start { justify-content: start; }
  .justify-center { justify-content: center; }
  .justify-space-between { justify-content: space-between; }

  .align-center { align-items: center; }
  .align-start { align-items: start; }
  .align-end { align-items: end; }
  .align-baseline { align-items: baseline; }

  .align-self-center { align-self: center; }
  .align-self-end { align-self: end; }
  .align-self-start { align-self: start; }

  .v-align-middle { vertical-align: middle; }

  .contain { contain: inline-size; }

  .display-inline { display: inline; }
  .display-block { display: block; }
  .display-inline-block { display: inline-block; }

  .flex { display: flex; }
  .flex-inline { display: inline-flex; }
  .flex-column { flex-direction: column; }
  .flex-wrap { flex-wrap: wrap; }

  .flex-1 { flex: 1; }
  .flex-none { flex: none; }
  .flex-item-grow { flex-grow: 1; }
  .flex-item-shrink { flex-shrink: 1; }
  .flex-item-no-shrink { flex-shrink: 0; }
  .flex-item-justify-start { margin-inline-end: auto; }
  .flex-item-justify-end { margin-inline-start: auto; }

  .grid { display: grid; }

  .gap {
    column-gap: var(--column-gap, var(--inline-space));
    row-gap: var(--row-gap, var(--block-space));
  }

  .gap-half {
    column-gap: var(--column-gap, var(--inline-space-half));
    row-gap: var(--row-gap, var(--block-space-half));
  }

  .gap-none {
    --column-gap: 0;
    --row-gap: 0;
    gap: 0;
  }

  /* ==========================================================================
     Sizing
     ========================================================================== */
  .full-width { inline-size: 100%; }
  .min-width { min-inline-size: 0; }
  .half-width { inline-size: 50%; }
  .max-width { max-inline-size: 100%; }
  .min-content { inline-size: min-content; }
  .fit-content { inline-size: fit-content; }
  .max-inline-size { max-inline-size: 100%; }
  .content-width { max-inline-size: 80rem; }
  .min-block-size-screen { min-block-size: 100svh; }

  /* ==========================================================================
     Overflow
     ========================================================================== */
  .overflow-x { overflow-x: auto; scroll-snap-type: x mandatory; scroll-behavior: smooth; }
  .overflow-y { overflow-y: auto; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
  .overflow-clip { text-overflow: clip; white-space: nowrap; overflow: hidden; }
  .overflow-ellipsis { text-overflow: ellipsis; white-space: nowrap; overflow: hidden; }
  .overflow-hidden { overflow: hidden; }

  .overflow-line-clamp {
    -webkit-line-clamp: var(--lines, 2);
    -webkit-box-orient: vertical;
    display: -webkit-box;
    overflow: hidden;
    text-overflow: clip;
    white-space: normal;
  }

  /* ==========================================================================
     Mouse pointer
     ========================================================================== */
  .non-clickable {
    cursor: default;
    pointer-events: none;
  }

  .cursor-pointer { cursor: pointer; }

  /* ==========================================================================
     Padding
     ========================================================================== */
  .pad { padding: var(--block-space) var(--inline-space); }
  .pad-double { padding: var(--block-space-double) var(--inline-space-double); }

  .pad-block { padding-block: var(--block-space); }
  .pad-block-start { padding-block-start: var(--block-space); }
  .pad-block-end { padding-block-end: var(--block-space); }
  .pad-block-half { padding-block: var(--block-space-half); }
  .pad-block-start-half { padding-block-start: var(--block-space-half); }

  .pad-inline { padding-inline: var(--inline-space); }
  .pad-inline-start { padding-inline-start: var(--inline-space); }
  .pad-inline-end { padding-inline-end: var(--inline-space); }
  .pad-inline-half { padding-inline: var(--inline-space-half); }
  .pad-inline-double { padding-inline: var(--inline-space-double); }

  .unpad { padding: 0; }
  .unpad-block-end { padding-block-end: 0; }
  .unpad-inline { padding-inline: 0; }

  /* ==========================================================================
     Margins
     ========================================================================== */
  .margin { margin: var(--block-space) var(--inline-space); }
  .margin-block { margin-block: var(--block-space); }
  .margin-block-half { margin-block: var(--block-space-half); }
  .margin-block-start { margin-block-start: var(--block-space); }
  .margin-block-start-half { margin-block-start: var(--block-space-half); }
  .margin-block-start-auto { margin-block-start: auto; }
  .margin-block-end { margin-block-end: var(--block-space); }
  .margin-block-end-half { margin-block-end: var(--block-space-half); }
  .margin-block-double { margin-block: var(--block-space-double); }
  .margin-block-end-double { margin-block-end: var(--block-space-double); }
  .margin-block-start-double { margin-block-start: var(--block-space-double); }

  .margin-inline { margin-inline: var(--inline-space); }
  .margin-inline-start { margin-inline-start: var(--inline-space); }
  .margin-inline-start-half { margin-inline-start: var(--inline-space-half); }
  .margin-inline-end { margin-inline-end: var(--inline-space); }
  .margin-inline-end-half { margin-inline-end: var(--inline-space-half); }
  .margin-inline-half { margin-inline: var(--inline-space-half); }
  .margin-inline-double { margin-inline: var(--inline-space-double); }

  .margin-none { margin: 0; }
  .margin-none-block { margin-block: 0; }
  .margin-none-block-start { margin-block-start: 0; }
  .margin-none-block-end { margin-block-end: 0; }

  .margin-none-inline { margin-inline: 0; }
  .margin-none-inline-start { margin-inline-start: 0; }
  .margin-none-inline-end { margin-inline-end: 0; }

  .center { margin-inline: auto; }
  .center-block { margin-block: auto; }

  /* ==========================================================================
     Position
     ========================================================================== */
  .position-relative { position: relative; }
  .position-sticky { position: sticky; inset: var(--inset, 0 auto auto auto); z-index: var(--z, 1); }

  /* ==========================================================================
     Fills (backgrounds)
     ========================================================================== */
  .fill { background-color: var(--color-canvas); }
  .fill-black { background-color: var(--color-ink); }
  .fill-white { background-color: var(--color-ink-inverted); }
  .fill-shade { background-color: var(--color-ink-lightest); }
  .fill-selected { background-color: var(--color-selected); }
  .fill-highlight { background-color: var(--color-highlight); }
  .fill-transparent { background-color: transparent; }
  .fill-card { background-color: var(--color-card); }
  .fill-popover { background-color: var(--color-popover); }
  .fill-primary { background-color: var(--color-primary); }

  .fill-highlighter {
    display: inline-block;
    position: relative;
    z-index: 1;

    &::before {
      background-color: var(--color-highlight);
      border-radius: 0.2em;
      content: "";
      inset-block: 0;
      inset-inline: -0.1em;
      position: absolute;
      transform: skewX(-10deg) rotate(1deg);
      z-index: -1;
    }
  }

  .translucent { opacity: var(--opacity, 0.66); }

  /* ==========================================================================
     Borders
     ========================================================================== */
  .border { border: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }
  .border-block { border-block: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }
  .border-bottom { border-block-end: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }
  .border-top { border-block-start: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }
  .borderless { border: 0; }

  .border-radius { border-radius: var(--border-radius, 0.5em); }

  /* ==========================================================================
     Shadows
     ========================================================================== */
  .shadow { box-shadow: var(--shadow); }

  /* ==========================================================================
     Lists
     ========================================================================== */
  :where(.list-style-none) {
    list-style: none;
    margin: 0 auto;
    padding: 0;
  }

  /* ==========================================================================
     Accessibility
     ========================================================================== */
  .visually-hidden,
  .for-screen-reader {
    block-size: 1px;
    clip-path: inset(50%);
    inline-size: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
  }

  /* ==========================================================================
     Visibility
     ========================================================================== */
  [hidden] { display: none !important; }
  .display-contents,
  [contents] { display: contents; }

  .hide-in-pwa {
    @media (display-mode: standalone) {
      display: none;
    }
  }

  .hide-in-browser {
    @media (display-mode: browser) {
      display: none;
    }
  }

  .hide-focus-ring {
    --focus-ring-size: 0;
  }

  .hide-on-touch {
    @media (any-hover: none) {
      display: none;
    }
  }

  .show-on-touch {
    display: none;

    @media (any-hover: none) {
      display: unset;
    }
  }

  .show-on-native {
    body:not([data-platform~=native]) & {
      display: none;
    }
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;

    &::-webkit-scrollbar {
      display: none;
    }
  }

  /* ==========================================================================
     User Select
     ========================================================================== */
  .select-none { user-select: none; }
  .select-text { user-select: text; }

  /* ==========================================================================
     FeedbackBin Extras
     Utilities not in our design system.
     Each should have a clear reason for existing.
     ========================================================================== */

  /* Grid — we use CSS grid layouts in several views */
  .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }

  /* Grid column span — used in dashboard layouts */
  .col-span-2 { grid-column: span 2; }
  .col-span-3 { grid-column: span 3; }
  .col-span-4 { grid-column: span 4; }

  /* Aspect ratio — needed for image/video containers */
  .aspect-square { aspect-ratio: 1 / 1; }
  .aspect-video { aspect-ratio: 16 / 9; }

  /* Object fit — needed for avatar/image components */
  .object-cover { object-fit: cover; }

  /* Opacity — used for disabled states and transitions */
  .opacity-0 { opacity: 0; }
  .opacity-100 { opacity: 1; }

  /* Z-index — needed for layered UI (modals, dropdowns, tooltips) */
  .z-0 { z-index: 0; }
  .z-10 { z-index: 10; }
  .z-50 { z-index: 50; }

  /* Antialiased text — used on body elements */
  .antialiased { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

  /* Overscroll — prevents scroll chaining on modals/drawers */
  .overscroll-none { overscroll-behavior: none; }

  /* Display — hiding elements without [hidden] attribute */
  .display-none { display: none; }

  /* Directional borders */
  .border-inline-start { border-inline-start: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }
  .border-inline-end { border-inline-end: var(--border-size, 1px) var(--border-style, solid) var(--border-color, var(--color-border)); }

  /* Missing padding half variant */
  .pad-block-end-half { padding-block-end: var(--block-space-half); }

  /* Auto margins for inline axis */
  .margin-inline-start-auto { margin-inline-start: auto; }
  .margin-inline-end-auto { margin-inline-end: auto; }

  /* Double gap */
  .gap-double {
    column-gap: var(--column-gap, var(--inline-space-double));
    row-gap: var(--row-gap, var(--block-space-double));
  }

  /* Divide — borders between children, used in lists/tables */
  .divide-y > * + * { border-block-start: 1px solid var(--color-border); }

  /* Text divider — horizontal line with centered text, e.g. "── Or continue with ──" */
  .text-divider {
    display: flex;
    align-items: center;
    gap: 1ch;

    &::before,
    &::after {
      content: "";
      flex: 1;
      border-block-start: 1px solid var(--color-border);
    }
  }

  /* Icon/element sizing — used extensively for lucide icons and UI elements */
  .size-3 { inline-size: 0.75rem; block-size: 0.75rem; }
  .size-4 { inline-size: 1rem; block-size: 1rem; }
  .size-5 { inline-size: 1.25rem; block-size: 1.25rem; }
  .size-6 { inline-size: 1.5rem; block-size: 1.5rem; }
  .size-7 { inline-size: 1.75rem; block-size: 1.75rem; }
  .size-8 { inline-size: 2rem; block-size: 2rem; }
  .size-10 { inline-size: 2.5rem; block-size: 2.5rem; }
  .size-12 { inline-size: 3rem; block-size: 3rem; }
  .size-16 { inline-size: 4rem; block-size: 4rem; }

  /* Responsive grid — column overrides at breakpoints */
  @media (min-width: 640px) {
    .sm\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .sm\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .sm\:flex-row { flex-direction: row; }
    .sm\:w-auto { inline-size: auto; }
    .sm\:align-center { align-items: center; }
    .sm\:justify-space-between { justify-content: space-between; }
  }

  @media (min-width: 768px) {
    .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  @media (min-width: 1024px) {
    .lg\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .lg\:block { display: block; }
  }

  /* Responsive visibility — hide on small screens */
  .kbd-shortcut-hint {
    display: none;
    @media (min-width: 768px) { display: inline; }
  }
}

<%# locals: (comment:, idea:, top_level_comments:) %>

<section class="max-w-5xl mx-auto">
  <%= render Elements::CardComponent.new do |c| %>
    <% c.with_body(class: "p-4 md:p-6 lg:p-8") do %>
      <div class="flex items-center justify-between gap-3 mb-4">
      <h2 class="text-xl font-semibold tracking-tight">
        <%= turbo_frame_tag "idea_#{idea.id}_comment_count" do %>
          <%= t(".comments_title_with_count", comment_count: idea.comments_count) %>
        <% end %>
      </h2>
      <%= render Elements::ButtonComponent.new(variant: :outline) do %>
        <%= lucide_icon "bell" %>
        <%= t(".subscribe") %>
      <% end %>
    </div>

    <%= tag.div id: "idea_#{idea.id}_comments", class: "divide-y divide-border" do %>
      <%= render partial: "comments/comment", collection: top_level_comments %>
    <% end %>

    <%= turbo_frame_tag "idea_comment_form", class: "mt-6" do %>
      <%= render partial: "comments/form", locals: { comment: comment, idea: idea } %>
    <% end %>
    <% end %>
  <% end %>
</section>

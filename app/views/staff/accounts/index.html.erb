<% content_for :title, "Accounts" %>

<div class="flex flex-column gap-8">
  <div class="flex flex-column gap-1">
    <h1 class="font-weight-bold" style="font-size: var(--text-3xl);">
      Accounts
    </h1>
    <p class="txt-subtle">
      Manage all accounts on the platform
    </p>
  </div>

  <div class="full-width" style="max-inline-size: 28rem;"
       data-controller="search"
       data-search-delay-value="300"
       data-search-loading-class="opacity-75"
       data-search-filtering-class="ring-2 ring-primary">
    <%= form_with url: staff_accounts_path, method: :get,
        data: {
          turbo_frame: "accounts_content",
          search_target: "form"
        } do |form| %>
      <%= form.label :search, "Search accounts", class: "visually-hidden" %>
      <%= form.search_field :search,
          placeholder: "Search by name...",
          value: params[:search],
          autocomplete: "off",
          class: "input full-width",
          data: {
            search_target: "input",
            action: "input->search#search"
          } %>
    <% end %>
  </div>

  <%= turbo_frame_tag "accounts_content",
      data: { action: "turbo:frame-load->search#searchComplete" } do %>
    <%= render "accounts_list", accounts: @accounts, pagy: @pagy %>
  <% end %>
</div>

<!-- Admin sidebar wrapper -->
<% content_for(:sidebar) do %>
  <style>
    .admin-sidebar { display: none; }
    .admin-mobile-header { display: flex; }
    @media (min-width: 1024px) {
      .admin-sidebar { display: flex; position: fixed; inset-block: 4rem 0; z-index: var(--z-modal); inline-size: 18rem; flex-direction: column; }
      .admin-mobile-header { display: none; }
      .admin-main-offset { padding-inline-start: 18rem; }
    }
  </style>
  <div data-controller="toggle">
    <!-- Desktop Sidebar -->
    <div class="admin-sidebar">
      <div class="flex flex-column flex-item-grow overflow-y fill-panel pad-inline pad-block-end-half border-inline-end" style="block-size: 100%; gap: var(--space-5);">
        <%= render "admin/sidebar" %>
      </div>
    </div>

    <!-- Mobile sidebar toggle header (only visible on mobile) -->
    <div class="admin-mobile-header position-sticky align-center border-bottom shadow" style="inset-block-start: 4rem; z-index: var(--z-fixed); block-size: 4rem; padding-inline: var(--space-4); background-color: oklch(from var(--color-background) l c h / 95%); backdrop-filter: blur(8px); gap: var(--space-4);">
      <button type="button"
              class="txt-subtle"
              style="margin: calc(var(--space-2) * -1); padding: var(--space-2);"
              aria-controls="admin-mobile-sidebar"
              data-toggle-target="trigger"
              data-action="click->toggle#toggle">
        <span class="visually-hidden"><%= t("layouts.admin.sr_only.open_sidebar") %></span>
        <%= lucide_icon "menu", class: "size-6" %>
      </button>
      <div class="flex flex-1 align-center">
        <h1 class="txt-large font-weight-bold"><%= t(".title") %></h1>
      </div>
    </div>

    <!-- Mobile sidebar overlay -->
    <div id="admin-mobile-sidebar"
         class="position-relative display-none"
         style="z-index: var(--z-modal);"
         role="dialog"
         aria-modal="true"
         aria-label="<%= t("layouts.admin.title") %>"
         data-toggle-target="toggleable">
      <div style="position: fixed; inset: 0; background-color: oklch(from var(--color-background) l c h / 80%); backdrop-filter: blur(8px);"></div>
      <div style="position: fixed; inset: 0; display: flex;">
        <div class="position-relative flex" style="margin-inline-end: var(--space-16); max-inline-size: 20rem; flex: 1;">
          <div style="position: absolute; inset-inline-start: 100%; inset-block-start: 0; inline-size: var(--space-16); display: flex; justify-content: center; padding-block-start: var(--space-5);">
            <button type="button"
                    style="margin: calc(var(--space-2) * -1); padding: var(--space-2);"
                    data-toggle-target="trigger"
                    data-action="click->toggle#hide">
              <span class="visually-hidden"><%= t("layouts.admin.sr_only.close_sidebar") %></span>
              <%= lucide_icon "x", class: "size-6" %>
            </button>
          </div>
          <div class="flex flex-column flex-item-grow overflow-y fill-panel pad-inline pad-block-end-half border-inline-end gap-5">
            <%= render "admin/sidebar", show_icon: true %>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<%= render template: "layouts/application" %>

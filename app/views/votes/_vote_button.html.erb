<%# locals: (voteable:) %>

<div class="flex flex-col items-center shrink-0">
  <% if authenticated? %>
    <%= turbo_frame_tag voteable, :vote_button do %>
      <% if voteable.voted_by?(Current.user) %>
        <%= button_to vote_path(voteable_type: voteable.class.to_s, voteable_id: voteable.id),
              method: :patch,
              class: "btn-secondary flex flex-col h-auto py-2 px-2 md:px-3 min-w-[50px] md:min-w-[60px]" do %>
          <%= lucide_icon "chevron-up", class: "h-3 w-3 md:h-4 md:w-4 mb-1" %>
          <span class="text-lg font-bold text-center min-w-[2ch] text-foreground"><%= voteable.votes_count %></span>
        <% end %>
      <% else %>
        <%= button_to vote_path(voteable_type: voteable.class.to_s, voteable_id: voteable.id),
              method: :patch,
              class: "btn-ghost flex flex-col h-auto py-2 px-2 md:px-3 min-w-[50px] md:min-w-[60px]" do %>
          <%= lucide_icon "chevron-up", class: "h-3 w-3 md:h-4 md:w-4 mb-1" %>
          <span class="text-lg font-bold text-center min-w-[2ch] text-foreground"><%= voteable.votes_count %></span>
        <% end %>
      <% end %>
    <% end %>
  <% else %>
    <%= link_to sign_in_path,
          data: { turbo_frame: :_top },
          class: "btn-ghost flex flex-col h-auto py-2 px-2 md:px-3 min-w-[50px] md:min-w-[60px]" do %>
      <%= lucide_icon "chevron-up", class: "h-3 w-3 md:h-4 md:w-4 mb-1" %>
      <span class="text-lg font-bold text-center min-w-[2ch] text-foreground"><%= voteable.votes_count %></span>
    <% end %>
  <% end %>
</div>

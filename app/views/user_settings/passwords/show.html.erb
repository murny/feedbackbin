<% content_for(:title) { t("user_settings.page_titles.password") } %>

<div class="container">
  <%= render partial: "user_settings/header" %>

  <div style="margin-block-start: var(--space-8);">
    <div class="card" style="padding: var(--space-6);">
      <div class="grid" style="gap: var(--space-6);">
        <div>
          <h2 class="txt-large font-weight-medium"><%= t(".change_password") %></h2>
          <p class="txt-small txt-subtle"><%= t(".change_password_description") %></p>
        </div>

        <%= form_with(model: @identity, scope: :identity,
              url: user_settings_password_path,
              method: :patch,
              data: { controller: "form", action: "keydown.enter->form#submit:prevent" }) do |form| %>
          <div class="grid" style="gap: var(--space-4);">
            <div class="grid" style="gap: var(--space-2);">
              <%= form.label :password_challenge, t(".current_password"), class: "txt-small font-weight-medium" %>
              <%= form.password_field :password_challenge, autocomplete: "current-password", required: true, class: "full-width" %>
              <p class="txt-x-small txt-subtle"><%= t(".current_password_hint") %></p>
            </div>

            <div class="grid" style="gap: var(--space-4); grid-template-columns: 1fr;">
              <div class="grid" style="gap: var(--space-2);">
                <%= form.label :password, t(".new_password"), class: "txt-small font-weight-medium" %>
                <%= form.password_field :password, autocomplete: "new-password", required: true, class: "full-width" %>
              </div>

              <div class="grid" style="gap: var(--space-2);">
                <%= form.label :password_confirmation, t(".confirm_password"), class: "txt-small font-weight-medium" %>
                <%= form.password_field :password_confirmation, autocomplete: "new-password", required: true, class: "full-width" %>
              </div>
            </div>
          </div>

          <div class="flex justify-end" style="gap: var(--space-3); padding-block-start: var(--space-6);">
            <%= link_to t(".forgot_my_password"), new_users_password_reset_path, class: "btn btn--ghost" %>
            <%= form.submit t(".save_password"), class: "btn" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<% content_for(:title) { t("user_settings.page_titles.preferences") } %>

<div class="center" style="max-inline-size: 56rem;">
  <%= render partial: "user_settings/header" %>

  <div style="margin-block-start: var(--space-8);">
    <div class="card" style="padding: var(--space-6);">
      <div class="flex flex-column" style="gap: var(--space-6);">
        <div>
          <h2 class="txt-large font-weight-medium"><%= t(".title") %></h2>
          <p class="txt-small txt-subtle"><%= t(".description") %></p>
        </div>

        <%= form_with(model: @user,
              url: user_settings_preferences_path,
              method: :patch,
              data: {
                controller: "form",
                action: "keydown.enter->form#submit:prevent"
              }) do |form| %>
          <%= render "error_messages", resource: form.object %>

          <div class="grid" style="gap: var(--space-6);">
            <div class="grid" style="gap: var(--space-2);">
              <%= form.label :theme, class: "txt-small font-weight-medium" %>

              <div class="grid grid-cols-3" style="gap: var(--space-2);">
                <% theme_options.each do |label, value, icon| %>
                  <label class="cursor-pointer">
                    <%= form.radio_button :theme, value,
                          class: "visually-hidden",
                          data: { action: "change->form#submit" } %>
                    <div class="flex flex-column align-center justify-center border border-radius txt-x-small pad theme-option" style="gap: var(--space-2); transition: color var(--duration-fast), background-color var(--duration-fast), border-color var(--duration-fast);">
                      <%= lucide_icon icon, style: "inline-size: 1rem; block-size: 1rem;" %>
                      <span><%= label %></span>
                    </div>
                  </label>
                <% end %>
              </div>

              <p class="txt-x-small txt-subtle"><%= t(".theme_hint") %></p>
            </div>

            <div class="grid" style="gap: var(--space-2);">
              <%= form.label :time_zone %>
              <%= form.time_zone_select :time_zone %>
              <p class="txt-x-small txt-subtle"><%= t(".time_zone_hint") %></p>
            </div>

            <div class="grid" style="gap: var(--space-2);">
              <%= form.label :preferred_language %>
              <%= form.select :preferred_language, language_options %>
              <p class="txt-x-small txt-subtle"><%= t(".language_hint") %></p>
            </div>
          </div>

          <div class="flex justify-end" style="gap: var(--space-3); padding-block-start: var(--space-6);">
            <%= form.submit t(".update_preferences"), class: "btn" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= tag.div(
  data: {
    controller: "tabs",
    tabs_index_value: items.find_index { |item| item[:value] == default_value } || 0,
    tabs_active_tab_class: "bg-background text-foreground shadow-sm dark:border-input dark:bg-input/30",
    tabs_inactive_tab_class: "text-muted-foreground hover:text-foreground hover:bg-muted/50"
  }.merge(options[:data] || {})
) do %>
  <%= tag.div(
    class: list_classes,
    role: "tablist"
  ) do %>
    <% items.each_with_index do |item, index| %>
      <%= tag.button(
        type: "button",
        id: item[:value],
        disabled: item[:disabled],
        data: {
          tabs_target: "tab",
          action: "click->tabs#change",
          index: index
        },
        class: trigger_classes,
        role: "tab",
        aria: {
          selected: index == (items.find_index { |item| item[:value] == default_value } || 0) ? "true" : "false",
          controls: "panel-#{item[:value]}"
        }
      ) do %>
        <% if item[:icon].present? %>
          <%= inline_svg_tag item[:icon], class: "size-4" %>
        <% end %>
        <%= item[:label] %>
      <% end %>
    <% end %>
  <% end %>

  <% items.each_with_index do |item, index| %>
    <%= tag.div(
      id: "panel-#{item[:value]}",
      data: {
        tabs_target: "panel"
      },
      class: content_classes,
      role: "tabpanel",
      aria: { labelledby: item[:value] }
    ) do %>
      <% if item[:content].present? %>
        <%= item[:content] %>
      <% elsif item[:partial].present? %>
        <%= render partial: item[:partial], locals: item[:locals] || {} %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

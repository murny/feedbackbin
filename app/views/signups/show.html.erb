<% content_for :title, t(".title") %>

<div class="container container--centered flex flex-column" style="gap: var(--space-6);">
  <div class="txt-align-center flex flex-column" style="gap: var(--space-2);">
    <h1 class="txt-xx-large font-weight-bold">
      <%= t(".title") %>
    </h1>
    <p class="txt-subtle">
      <%= t(".description") %>
    </p>
  </div>

  <%= render Elements::CardComponent.new do |c| %>
    <% c.with_body do %>
      <%= form_with(model: @signup,
                    url: signup_path,
                    class: "flex flex-column",
                    style: "gap: var(--space-6);",
                    data: {
                      controller: "form",
                      action: "keydown.enter->form#submit:prevent"
                    }
                   ) do |form| %>
        <%= render "error_messages", resource: @signup %>

        <div class="flex flex-column" style="gap: var(--space-8);">
          <div class="flex flex-column" style="gap: var(--space-4);">
            <div>
              <h3 class="font-weight-medium"><%= t(".account_setup") %></h3>
              <p class="txt-small txt-subtle"><%= t(".account_setup_description") %></p>
            </div>

            <div class="grid" style="gap: var(--space-4);">
              <%= render ImageUploadPreviewComponent.new(
                    form: form,
                    field_name: :avatar,
                    preview_url: asset_path("default-avatar.svg"),
                    upload_button_text: t(".upload_avatar"),
                    size_hint: t(".avatar_size_hint")) %>

              <div class="grid" style="gap: var(--space-4);">
                <div class="grid" style="gap: var(--space-2);">
                  <%= form.label :name, class: "txt-small font-weight-medium" %>
                  <%= form.text_field :name,
                        required: true,
                        autofocus: true,
                        autocomplete: "name",
                        placeholder: t(".name_placeholder") %>
                  <p class="txt-x-small txt-subtle"><%= t(".name_hint") %></p>
                </div>

                <div class="grid" style="gap: var(--space-2);">
                  <%= form.label :email_address, class: "txt-small font-weight-medium" %>
                  <%= form.email_field :email_address,
                        required: true,
                        autocomplete: "email",
                        placeholder: t(".email_address_placeholder") %>
                  <p class="txt-x-small txt-subtle"><%= t(".email_address_hint") %></p>
                </div>

                <div class="grid" style="gap: var(--space-2);">
                  <%= form.label :password, class: "txt-small font-weight-medium" %>
                  <%= form.password_field :password,
                        required: true,
                        autocomplete: "new-password",
                        placeholder: t(".password_placeholder") %>
                  <p class="txt-x-small txt-subtle"><%= t(".password_hint") %></p>
                </div>
              </div>
            </div>
          </div>

          <div class="flex flex-column" style="gap: var(--space-4);">
            <div>
              <h3 class="font-weight-medium"><%= t(".account_setup_section") %></h3>
              <p class="txt-small txt-subtle"><%= t(".account_setup_description") %></p>
            </div>

            <div class="grid" style="gap: var(--space-4);">
              <div class="grid" style="gap: var(--space-2);">
                <%= form.label :account_name, t(".account_name"), class: "txt-small font-weight-medium" %>
                <%= form.text_field :account_name,
                      required: true,
                      placeholder: t(".account_name_placeholder") %>
              </div>

              <%= render ImageUploadPreviewComponent.new(
                    form: form,
                    field_name: :account_logo,
                    preview_url: asset_path("default-logo.svg"),
                    upload_button_text: t(".upload_account_logo"),
                    size_hint: t(".logo_size_hint")) %>
            </div>
          </div>
        </div>

        <div class="flex justify-end border-top" style="padding-block-start: var(--space-6);">
          <%= form.submit t(".create_account"), class: "btn btn--primary" %>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>

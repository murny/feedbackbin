<%# locals: (path_helper:, boards:, selected_board:, turbo_frame:, preserve_params: {}) %>

<div class="flex align-center" style="gap: var(--space-2);">
  <label class="txt-small font-weight-medium txt-subtle"><%= t(".board_label") %></label>
  <%= render Elements::DropdownMenuComponent.new do |dropdown| %>
    <% dropdown.with_trigger do %>
      <%= selected_board&.name || t(".all_boards") %>
    <% end %>

    <% dropdown.with_item_content(
      href: send(path_helper, **clean_params(**preserve_params, board_id: nil)),
      data: { turbo_frame: turbo_frame },
      class: selected_board ? nil : "fill-selected"
    ) do %>
      <%= t(".all_boards") %>
    <% end %>

    <% boards.each do |board| %>
      <% dropdown.with_item_content(
        href: send(path_helper, **clean_params(**preserve_params, board_id: board.id)),
        data: { turbo_frame: turbo_frame },
        class: selected_board == board ? "fill-selected" : nil
      ) do %>
        <span class="flex-item-no-shrink" style="inline-size: 0.75rem; block-size: 0.75rem; border-radius: 50%; background-color: <%= board.color %>;"></span>
        <span><%= board.name %></span>
      <% end %>
    <% end %>
  <% end %>
</div>

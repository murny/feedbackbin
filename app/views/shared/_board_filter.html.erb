<%# locals: (path_helper:, boards:, selected_board:, turbo_frame:, preserve_params: {}) %>

<div class="flex items-center gap-2">
  <label class="text-sm font-medium text-muted-foreground"><%= t(".board_label") %></label>
  <%= render Elements::DropdownMenuComponent.new do |dropdown| %>
    <% dropdown.with_trigger do %>
      <%= selected_board&.name || t(".all_boards") %>
    <% end %>

    <% dropdown.with_item_content(
      href: send(path_helper, **clean_params(**preserve_params, board_id: nil)),
      data: { turbo_frame: turbo_frame },
      class: selected_board ? nil : "bg-accent"
    ) do %>
      <%= t(".all_boards") %>
    <% end %>

    <% boards.each do |board| %>
      <% dropdown.with_item_content(
        href: send(path_helper, **clean_params(**preserve_params, board_id: board.id)),
        data: { turbo_frame: turbo_frame },
        class: selected_board == board ? "bg-accent" : nil
      ) do %>
        <span class="w-3 h-3 rounded-full shrink-0" style="background-color: <%= board.color %>;"></span>
        <span><%= board.name %></span>
      <% end %>
    <% end %>
  <% end %>
</div>

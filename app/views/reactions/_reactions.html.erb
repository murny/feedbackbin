<%# locals: (reactable:) %>

<%= turbo_frame_tag reactable, :reacting do %>
  <div class="flex flex-wrap items-center gap-2">
    <div id="<%= dom_id(reactable, :reactions) %>" class="flex flex-wrap items-center gap-1">
      <%= render partial: "reactions/reaction", collection: reactions_grouped(reactable), as: :reaction_group, locals: { reactable: reactable } %>
    </div>

    <% if authenticated? %>
      <%= turbo_frame_tag reactable, :new_reaction do %>
        <%= link_to new_polymorphic_path([ *reaction_path_prefix_for(reactable), :reaction ]),
              class: "inline-flex items-center justify-center size-7 rounded-full text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",
              title: t("reactions.add_reaction"),
              data: { turbo_frame: dom_id(reactable, :new_reaction) } do %>
          <%= lucide_icon "smile-plus", class: "size-4" %>
          <span class="sr-only"><%= t("reactions.add_reaction") %></span>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>

<%# locals: (category:) %>

<%= render_form_with model: category, url: category.persisted? ? admin_settings_category_path(category) : admin_settings_categories_path, method: category.persisted? ? :patch : :post, html: { data: { controller: "badge-preview" } } do |f| %>
  <div class="grid gap-6">
    <div class="grid gap-3">
      <%= f.label :name, t(".name_label") %>
      <%= f.text_field :name, placeholder: t(".name_placeholder"), data: { badge_preview_target: "nameInput", action: "input->badge-preview#updatePreview" } %>
    </div>

    <div class="grid gap-3">
      <%= f.label :description, t(".description_label") %>
      <%= f.text_area :description, placeholder: t(".description_placeholder"), rows: 3 %>
      <p class="text-xs text-muted-foreground"><%= t(".description_hint") %></p>
    </div>

    <div class="grid gap-3">
      <%= f.label :color, t(".color_label") %>
      <div class="flex items-center gap-3">
        <%= f.color_field :color, class: "h-10 w-20 rounded-md border border-input cursor-pointer", data: { badge_preview_target: "colorInput", action: "input->badge-preview#updatePreview" } %>
        <span class="text-sm text-muted-foreground"><%= t(".color_hint") %></span>
      </div>
    </div>

    <div class="rounded-lg border border-border bg-muted/50 p-4">
      <h4 class="text-sm font-medium mb-2"><%= t(".preview_label") %></h4>
      <%= render_badge(
        variant: :outline,
        class: "gap-1.5 text-muted-foreground bg-muted/30 border-border"
      ) do %>
        <span class="w-2 h-2 rounded-full flex-shrink-0" style="background-color: <%= category.color %>;" data-badge-preview-target="previewColor"></span>
        <span data-badge-preview-target="previewName"><%= category.name %></span>
      <% end %>
    </div>
  </div>

  <div class="mt-8 flex items-center justify-end gap-3">
    <%= link_to t("cancel"), admin_settings_categories_path, class: "btn btn-secondary" %>
    <%= render_button text: category.persisted? ? t(".save_changes") : t(".create_category"), type: :submit, variant: :default %>
  </div>
<% end %>

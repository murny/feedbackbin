<%# locals: (board:) %>

<%= form_with model: board, url: board.persisted? ? admin_settings_board_path(board) : admin_settings_boards_path, method: board.persisted? ? :patch : :post, class: "flex flex-column", style: "gap: var(--space-6);", data: { controller: "badge-preview" } do |f| %>
  <div class="grid" style="gap: var(--space-6);">
    <div class="grid" style="gap: var(--space-3);">
      <%= f.label :name, t(".name_label") %>
      <%= f.text_field :name, placeholder: t(".name_placeholder"), data: { badge_preview_target: "nameInput", action: "input->badge-preview#updatePreview" } %>
    </div>

    <div class="grid" style="gap: var(--space-3);">
      <%= f.label :description, t(".description_label") %>
      <%= f.text_area :description, placeholder: t(".description_placeholder"), rows: 3, maxlength: 500 %>
      <p class="txt-x-small txt-subtle"><%= t(".description_hint") %></p>
    </div>

    <div class="grid" style="gap: var(--space-3);">
      <%= f.label :color, t(".color_label") %>
      <div class="flex align-center" style="gap: var(--space-3);">
        <%= f.color_field :color, class: "border border-radius cursor-pointer", style: "block-size: 2.5rem; inline-size: 5rem;", data: { badge_preview_target: "colorInput", action: "input->badge-preview#updatePreview" } %>
        <span class="txt-small txt-subtle"><%= t(".color_hint") %></span>
      </div>
    </div>

    <div class="border-radius border pad" style="border-color: var(--color-border); background-color: oklch(from var(--color-muted) l c h / 50%);">
      <h4 class="txt-small font-weight-medium" style="margin-block-end: var(--space-2);"><%= t(".preview_label") %></h4>
      <%= render Elements::BadgeComponent.new(
        variant: :outline,
        class: "txt-subtle",
        style: "gap: 0.375rem; background-color: oklch(from var(--color-muted) l c h / 30%); border-color: var(--color-border);"
      ) do %>
        <span class="flex-item-no-shrink" style="inline-size: 0.5rem; block-size: 0.5rem; border-radius: 9999px; background-color: <%= board.color %>;" data-badge-preview-target="previewColor"></span>
        <span data-badge-preview-target="previewName"><%= board.name %></span>
      <% end %>
    </div>
  </div>

  <div class="flex align-center justify-end" style="margin-block-start: var(--space-8); gap: var(--space-3);">
    <%= link_to t("cancel"), admin_settings_boards_path, class: "btn btn--secondary" %>
    <%= render Elements::ButtonComponent.new(type: :submit, variant: :default) do %>
      <%= board.persisted? ? t(".save_changes") : t(".create_board") %>
    <% end %>
  </div>
<% end %>

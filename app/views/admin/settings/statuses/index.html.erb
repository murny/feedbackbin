<% content_for :title, t(".title") %>

<div class="container">
  <%= render partial: "admin/settings/header" %>

  <div class="margin-block-start-double">
    <div class="flex align-center justify-space-between" style="margin-block-end: var(--space-6);">
      <div>
        <h2 class="txt-medium font-weight-medium"><%= t(".title") %></h2>
        <p class="txt-small txt-subtle"><%= t(".description") %></p>
      </div>
      <div class="txt-nowrap">
        <%= link_to t(".new_status"), new_admin_settings_status_path, class: "btn btn--primary" %>
      </div>
    </div>

    <% if @statuses.any? %>
      <%= render Elements::PanelComponent.new do |c| %>
        <% c.with_body(class: "unpad") do %>
          <ul role="list" class="divide-y">
          <% @statuses.each do |status| %>
            <li class="flex align-center justify-space-between" style="gap: var(--space-6); padding-block: var(--space-5); padding-inline: var(--space-6);">
              <div class="flex align-center min-width gap-4">
                <span class="size-6 flex-item-no-shrink" style="border-radius: 9999px; box-shadow: 0 0 0 2px var(--color-background), var(--shadow-sm); background-color: <%= status.color %>;"></span>
                <div class="min-width" style="flex: 1 1 auto;">
                  <div class="flex align-center gap-2">
                    <p class="txt-small font-weight-bold">
                      <%= status.name %>
                    </p>
                    <div class="flex align-center gap-1">
                      <% if status.show_on_idea %>
                        <span class="flex-inline align-center border-radius" style="gap: var(--space-1); padding-inline: var(--space-2); padding-block: 0.125rem; font-size: var(--text-xx-small); font-weight: 500; background-color: oklch(0.97 0.014 254.604); color: oklch(0.488 0.243 264.376); box-shadow: inset 0 0 0 1px oklch(from oklch(0.488 0.243 264.376) l c h / 10%);" title="<%= t(".visible_on_idea") %>">
                          <%= lucide_icon "list", class: "size-3" %>
                          <span class="kbd-shortcut-hint"><%= t(".idea_badge") %></span>
                        </span>
                      <% end %>
                      <% if status.show_on_roadmap %>
                        <span class="flex-inline align-center border-radius" style="gap: var(--space-1); padding-inline: var(--space-2); padding-block: 0.125rem; font-size: var(--text-xx-small); font-weight: 500; background-color: oklch(0.977 0.014 308.299); color: oklch(0.496 0.265 301.924); box-shadow: inset 0 0 0 1px oklch(from oklch(0.496 0.265 301.924) l c h / 10%);" title="<%= t(".visible_on_roadmap") %>">
                          <%= lucide_icon "map", class: "size-3" %>
                          <span class="kbd-shortcut-hint"><%= t(".roadmap_badge") %></span>
                        </span>
                      <% end %>
                    </div>
                  </div>
                  <div class="flex align-center txt-subtle" style="margin-block-start: var(--space-1); gap: var(--space-2); font-size: var(--text-xx-small); line-height: 1.25rem;">
                    <p><%= t(".position_label") %> <%= status.position %></p>
                    <svg viewBox="0 0 2 2" style="inline-size: 0.125rem; block-size: 0.125rem; fill: currentColor;">
                      <circle cx="1" cy="1" r="1" />
                    </svg>
                    <p>
                      <%= t(".ideas_count", count: status.ideas.size) %>
                    </p>
                  </div>
                </div>
              </div>
              <div class="flex align-center gap-4">
                <div class="flex gap-2">
                  <%= link_to edit_admin_settings_status_path(status), class: "txt-small txt-subtle" do %>
                    <%= lucide_icon "pencil", class: "size-5" %>
                    <span class="visually-hidden"><%= t("edit") %></span>
                  <% end %>
                  <%= link_to admin_settings_status_path(status),
                        class: "txt-small",
                        style: "color: var(--color-destructive);",
                        data: { "turbo-method": :delete, turbo_confirm: t("are_you_sure") } do %>
                    <%= lucide_icon "trash-2", class: "size-5" %>
                    <span class="visually-hidden"><%= t("delete") %></span>
                  <% end %>
                </div>
              </div>
            </li>
          <% end %>
          </ul>
        <% end %>
      <% end %>
    <% else %>
      <%= render Elements::PanelComponent.new do |c| %>
        <% c.with_body(class: "txt-align-center", style: "padding: var(--space-8);") do %>
          <%= lucide_icon "tag", class: "size-12 txt-subtle center" %>
        <h3 class="txt-medium font-weight-bold margin-block-start"><%= t(".no_statuses_title") %></h3>
        <p class="txt-small txt-subtle margin-block-start-half"><%= t(".no_statuses_description") %></p>
        <div style="margin-block-start: var(--space-6);">
          <%= link_to t(".create_first_status"), new_admin_settings_status_path, class: "btn btn--primary" %>
        </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<% content_for :title, t(".title") %>

<div class="container mx-auto max-w-4xl">
  <%= render partial: "admin/settings/header" %>

  <div class="mt-8">
    <div class="mb-6">
      <h2 class="text-lg font-medium text-destructive"><%= t(".title") %></h2>
      <p class="text-sm text-muted-foreground"><%= t(".page_description") %></p>
    </div>

    <%= render Elements::AlertComponent.new(variant: :destructive, title: t(".subtitle"), description: t(".description"), icon: "shield-alert") %>

    <!-- Transfer Ownership Section -->
    <div class="mt-8">
      <%= render Elements::CardComponent.new do |c| %>
        <% c.with_header(title: t(".transfer_ownership_title"), description: t(".transfer_ownership_description")) %>
        <% c.with_body(class: "py-4") do %>
          <div class="flex items-center gap-3">
            <%= image_tag fresh_user_avatar_path(@owner),
                class: "h-10 w-10 rounded-full" %>

            <div class="flex-1">
              <p class="font-medium"><%= @owner.name %></p>
              <p class="text-sm text-muted-foreground"><%= @owner.email_address %></p>
            </div>

            <%= render Elements::ButtonComponent.new(
                href: new_admin_settings_ownership_transfer_path,
                variant: :outline,
                size: :sm
            ) do %>
              <%= t(".transfer_ownership_button") %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="mt-8">
      <%= render Elements::CardComponent.new do |c| %>
        <% c.with_header(title: t(".delete_title"), description: t(".delete_description")) %>
        <% c.with_body do %>
            <%= form_with model: Current.organization, url: admin_settings_danger_zone_path, method: :delete, class: "space-y-4" do |form| %>
            <%= render "error_messages", resource: form.object %>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-foreground">
                <%= t(".confirmation_label") %>
              </label>
              <p class="text-sm text-muted-foreground">
                <%= t(".confirmation_description_html", name: Current.organization.name) %>
              </p>
            </div>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-foreground" for="organization_name">
                <%= t(".enter_name") %>
              </label>
              <%= form.text_field :name, value: nil, placeholder: Current.organization.name, autocomplete: "off", class: "form-input w-full", required: true %>
            </div>

            <div class="flex items-start gap-3">
              <%= form.check_box :acknowledge, { required: true, class: "form-checkbox mt-1" }, true, false %>
              <label class="text-sm text-muted-foreground" for="organization_acknowledge">
                <%= t(".acknowledge") %>
              </label>
            </div>

            <div class="pt-2">
              <%= render Elements::ButtonComponent.new(variant: :destructive, type: :submit, data: { turbo_confirm: t(".turbo_confirm") }) do %>
                <%= t(".delete_button") %>
              <% end %>
            </div>
            <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<% content_for :title, t(".title") %>

<div class="center full-width" style="max-inline-size: 56rem;">
  <%= render partial: "admin/settings/header" %>

  <div style="margin-block-start: var(--space-8);">
    <div style="margin-block-end: var(--space-6);">
      <h2 class="txt-large font-weight-medium" style="color: var(--color-destructive);"><%= t(".title") %></h2>
      <p class="txt-small txt-subtle"><%= t(".page_description") %></p>
    </div>

    <%= render Elements::AlertComponent.new(variant: :destructive, title: t(".subtitle"), description: t(".description"), icon: "shield-alert") %>

    <div style="margin-block-start: var(--space-8);">
      <%= render Elements::CardComponent.new do |c| %>
        <% c.with_header(title: t(".transfer_ownership_title"), description: t(".transfer_ownership_description")) %>
        <% c.with_body(style: "padding-block: var(--space-4);") do %>
          <div class="flex align-center" style="gap: var(--space-3);">
            <%= image_tag fresh_user_avatar_path(@owner),
                style: "inline-size: 2.5rem; block-size: 2.5rem; border-radius: 9999px;" %>

            <div class="flex-1">
              <p class="font-weight-medium"><%= @owner.name %></p>
              <p class="txt-small txt-subtle"><%= @owner.identity.email_address %></p>
            </div>

            <%= render Elements::ButtonComponent.new(
                href: new_admin_settings_ownership_transfer_path,
                variant: :outline,
                size: :sm
            ) do %>
              <%= t(".transfer_ownership_button") %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>

    <div style="margin-block-start: var(--space-8);">
      <%= render Elements::CardComponent.new do |c| %>
        <% c.with_header(title: t(".delete_title"), description: t(".delete_description")) %>
        <% c.with_body do %>
            <%= form_with model: Current.account, url: admin_settings_danger_zone_path, method: :delete, class: "flex flex-column", style: "gap: var(--space-4);" do |form| %>
            <%= render "error_messages", resource: form.object %>

            <div class="flex flex-column" style="gap: var(--space-2);">
              <label class="display-block txt-small font-weight-medium">
                <%= t(".confirmation_label") %>
              </label>
              <p class="txt-small txt-subtle">
                <%= t(".confirmation_description_html", name: Current.account.name) %>
              </p>
            </div>

            <div class="flex flex-column" style="gap: var(--space-2);">
              <label class="display-block txt-small font-weight-medium" for="account_name">
                <%= t(".enter_name") %>
              </label>
              <%= form.text_field :name, value: nil, placeholder: Current.account.name, autocomplete: "off", class: "form-input full-width", required: true %>
            </div>

            <div class="flex align-start" style="gap: var(--space-3);">
              <%= form.check_box :acknowledge, { required: true, class: "form-checkbox", style: "margin-block-start: var(--space-1);" }, true, false %>
              <label class="txt-small txt-subtle" for="account_acknowledge">
                <%= t(".acknowledge") %>
              </label>
            </div>

            <div style="padding-block-start: var(--space-2);">
              <%= render Elements::ButtonComponent.new(variant: :destructive, type: :submit, data: { turbo_confirm: t(".turbo_confirm") }) do %>
                <%= t(".delete_button") %>
              <% end %>
            </div>
            <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<% content_for :title, t(".title") %>

<div class="container mx-auto max-w-4xl">
  <%= render partial: "admin/settings/header" %>

  <div class="mt-8">
    <div class="mb-6">
      <h2 class="text-lg font-medium text-destructive"><%= t(".title") %></h2>
      <p class="text-sm text-muted-foreground"><%= t(".page_description") %></p>
    </div>

    <%= render_alert variant: :destructive, title: t(".subtitle"), description: t(".description"), icon: "shield-alert" %>

    <!-- Transfer Ownership Section -->
    <div class="mt-8">
      <%= render_card title: t(".transfer_ownership_title"), description: t(".transfer_ownership_description") do %>
        <div class="px-6 py-4">
          <div class="flex items-center gap-3">
            <%= image_tag fresh_user_avatar_path(Current.organization.owner),
                class: "h-10 w-10 rounded-full" %>

            <div class="flex-1">
              <p class="font-medium"><%= Current.organization.owner.name %></p>
              <p class="text-sm text-muted-foreground"><%= Current.organization.owner.email_address %></p>
            </div>

            <%= render_button text: t(".transfer_ownership_button"),
                href: new_admin_settings_ownership_transfer_path,
                variant: :outline,
                size: :sm %>
          </div>
        </div>
      <% end %>
    </div>

    <div class="mt-8">
      <%= render_card title: t(".delete_title"), description: t(".delete_description") do %>
          <div class="px-6">
            <%= form_with model: Current.organization, url: admin_settings_danger_zone_path, method: :delete, class: "space-y-4" do |form| %>
            <%= render "error_messages", resource: form.object %>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-foreground">
                <%= t(".confirmation_label") %>
              </label>
              <p class="text-sm text-muted-foreground">
                <%= t(".confirmation_description_html", name: Current.organization.name) %>
              </p>
            </div>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-foreground" for="organization_name">
                <%= t(".enter_name") %>
              </label>
              <%= form.text_field :name, value: nil, placeholder: Current.organization.name, autocomplete: "off", class: "form-input w-full", required: true %>
            </div>

            <div class="flex items-start gap-3">
              <%= form.check_box :acknowledge, { required: true, class: "form-checkbox mt-1" }, true, false %>
              <label class="text-sm text-muted-foreground" for="organization_acknowledge">
                <%= t(".acknowledge") %>
              </label>
            </div>

            <div class="pt-2">
              <%= render_button text: t(".delete_button"), variant: :destructive, type: :submit, data: { turbo_confirm: t(".turbo_confirm") } %>
            </div>
            <% end %>
          </div>
      <% end %>
    </div>
  </div>
</div>

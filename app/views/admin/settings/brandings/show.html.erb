<% content_for :title, t(".title") %>

<div class="container mx-auto max-w-4xl">
  <%= render partial: "admin/settings/header" %>

  <!-- Branding Section -->
  <div class="mt-8">
    <div class="mb-6">
      <h2 class="text-lg font-medium"><%= t(".title") %></h2>
      <p class="text-sm text-muted-foreground"><%= t(".description") %></p>
    </div>

    <%= render Elements::CardComponent.new do |c| %>
      <% c.with_body do %>
        <%= form_with model: @organization, url: admin_settings_branding_path, method: :patch, multipart: true, class: "space-y-6" do |f| %>
            <%= render "error_messages", resource: @organization %>

            <div class="grid gap-6">
              <div class="grid gap-3">
                <%= f.label :name, t(".name") %>
                <%= f.text_field :name %>
              </div>

              <% if Rails.application.config.multi_tenant %>
                <div class="grid gap-3">
                  <%= f.label :subdomain, t(".subdomain") %>
                <%= f.text_field :subdomain %>
                </div>
              <% end %>

              <div class="grid gap-3">
                <%= f.label :logo, t(".logo"), class: "text-sm font-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :logo,
                      preview_url: attachment_preview_url(@organization.logo,
                                                          variant_options: { resize_to_limit: [ 96, 96 ] },
                                                          default_url: "/icon.svg"),
                      upload_button_text: t(".upload_new_logo"),
                      size_hint: t(".logo_size_hint")) %>
              </div>

              <div class="grid gap-3">
                <%= f.label :show_company_name, t(".logo_display"), class: "text-sm font-medium" %>
                <div class="space-y-2">
                  <div class="flex items-center gap-2">
                    <%= f.radio_button :show_company_name, true, class: "h-4 w-4" %>
                    <%= f.label :show_company_name_true, t(".logo_and_name"), class: "font-normal" %>
                  </div>
                  <div class="flex items-center gap-2">
                    <%= f.radio_button :show_company_name, false, class: "h-4 w-4" %>
                    <%= f.label :show_company_name_false, t(".logo_only"), class: "font-normal" %>
                  </div>
                </div>
              </div>

              <div class="grid gap-3">
                <%= f.label :logo_link, t(".logo_link"), class: "text-sm font-medium" %>
                <%= f.url_field :logo_link, placeholder: t(".logo_link_placeholder") %>
                <p class="text-xs text-muted-foreground">
                  <%= t(".logo_link_hint") %>
                </p>
              </div>

              <div class="grid gap-3">
                <%= f.label :favicon, t(".favicon"), class: "text-sm font-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :favicon,
                      preview_url: attachment_preview_url(@organization.favicon,
                                                          variant_options: { resize_to_limit: [ 96, 96 ] },
                                                          default_url: "/icon.png"),
                      upload_button_text: t(".upload_favicon"),
                      size_hint: t(".favicon_hint"),
                      image_class: "h-16 w-16 flex-none rounded border bg-muted object-cover") %>
              </div>

              <div class="grid gap-3">
                <%= f.label :og_image, t(".og_image"), class: "text-sm font-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :og_image,
                      preview_url: attachment_preview_url(@organization.og_image,
                                                          variant_options: { resize_to_limit: [ 400, 210 ] },
                                                          default_url: "/icon.svg"),
                      upload_button_text: t(".upload_og_image"),
                      size_hint: t(".og_image_hint"),
                      image_class: (@organization.og_image.attached? ?
                                    "h-32 w-auto rounded-lg border object-cover" :
                                    "h-32 w-auto rounded-lg border bg-muted object-contain p-4")) %>
              </div>
            </div>

            <div class="mt-8 flex items-center justify-end gap-3">
              <%= render Elements::ButtonComponent.new(type: :submit, variant: :default) do %>
                <%= t(".save_changes") %>
              <% end %>
            </div>
          <% end %>
      <% end %>
    <% end %>
  </div>
</div>

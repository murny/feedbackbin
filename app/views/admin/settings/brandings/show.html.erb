<% content_for :title, t(".title") %>

<div class="center full-width" style="max-inline-size: 56rem;">
  <%= render partial: "admin/settings/header" %>

  <div style="margin-block-start: var(--space-8);">
    <div style="margin-block-end: var(--space-6);">
      <h2 class="txt-large font-weight-medium"><%= t(".title") %></h2>
      <p class="txt-small txt-subtle"><%= t(".description") %></p>
    </div>

    <%= render Elements::CardComponent.new do |c| %>
      <% c.with_body do %>
        <%= form_with model: @account, url: admin_settings_branding_path, method: :patch, multipart: true, class: "flex flex-column", style: "gap: var(--space-6);" do |f| %>
            <%= render "error_messages", resource: @account %>

            <div class="grid" style="gap: var(--space-6);">
              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :name, t(".name") %>
                <%= f.text_field :name %>
              </div>

              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :logo, t(".logo"), class: "txt-small font-weight-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :logo,
                      preview_url: attachment_preview_url(@account.logo,
                                                          variant_options: { resize_to_limit: [ 96, 96 ] },
                                                          default_url: "/icon.svg"),
                      upload_button_text: t(".upload_new_logo"),
                      size_hint: t(".logo_size_hint")) %>
              </div>

              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :show_company_name, t(".logo_display"), class: "txt-small font-weight-medium" %>
                <div class="flex flex-column" style="gap: var(--space-2);">
                  <div class="flex align-center" style="gap: var(--space-2);">
                    <%= f.radio_button :show_company_name, true, style: "inline-size: 1rem; block-size: 1rem;" %>
                    <%= f.label :show_company_name_true, t(".logo_and_name"), class: "font-weight-normal" %>
                  </div>
                  <div class="flex align-center" style="gap: var(--space-2);">
                    <%= f.radio_button :show_company_name, false, style: "inline-size: 1rem; block-size: 1rem;" %>
                    <%= f.label :show_company_name_false, t(".logo_only"), class: "font-weight-normal" %>
                  </div>
                </div>
              </div>

              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :logo_link, t(".logo_link"), class: "txt-small font-weight-medium" %>
                <%= f.url_field :logo_link, placeholder: t(".logo_link_placeholder") %>
                <p class="txt-x-small txt-subtle">
                  <%= t(".logo_link_hint") %>
                </p>
              </div>

              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :favicon, t(".favicon"), class: "txt-small font-weight-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :favicon,
                      preview_url: attachment_preview_url(@account.favicon,
                                                          variant_options: { resize_to_limit: [ 96, 96 ] },
                                                          default_url: "/icon.png"),
                      upload_button_text: t(".upload_favicon"),
                      size_hint: t(".favicon_hint"),
                      image_class: "flex-none border border-radius object-cover",
                      image_style: "inline-size: 4rem; block-size: 4rem; background-color: var(--color-muted);") %>
              </div>

              <div class="grid" style="gap: var(--space-3);">
                <%= f.label :og_image, t(".og_image"), class: "txt-small font-weight-medium" %>
                <%= render ImageUploadPreviewComponent.new(
                      form: f,
                      field_name: :og_image,
                      preview_url: attachment_preview_url(@account.og_image,
                                                          variant_options: { resize_to_limit: [ 400, 210 ] },
                                                          default_url: "/icon.svg"),
                      upload_button_text: t(".upload_og_image"),
                      size_hint: t(".og_image_hint"),
                      image_class: (@account.og_image.attached? ?
                                    "border border-radius object-cover" :
                                    "border border-radius object-cover"),
                      image_style: (@account.og_image.attached? ?
                                    "block-size: 8rem; inline-size: auto;" :
                                    "block-size: 8rem; inline-size: auto; background-color: var(--color-muted); object-fit: contain; padding: var(--space-4);")) %>
              </div>
            </div>

            <div class="flex align-center justify-end" style="margin-block-start: var(--space-8); gap: var(--space-3);">
              <%= render Elements::ButtonComponent.new(type: :submit, variant: :default) do %>
                <%= t(".save_changes") %>
              <% end %>
            </div>
          <% end %>
      <% end %>
    <% end %>
  </div>
</div>

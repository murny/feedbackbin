<% content_for :title, t(".title") %>

<div class="container mx-auto max-w-4xl">
  <%= render partial: "admin/settings/header" %>

  <!-- Navigation Section -->
  <div class="mt-8">
    <div class="mb-6">
      <h2 class="text-lg font-medium"><%= t(".title") %></h2>
      <p class="text-sm text-muted-foreground"><%= t(".description") %></p>
    </div>

    <%= render_card do %>
      <div class="px-6">
        <%= render_form_with model: Current.organization, url: admin_settings_navigation_path, method: :patch do |f| %>
          <div class="grid gap-6">
            <!-- Module Toggles -->
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 border rounded-lg">
                <div class="flex-1">
                  <h3 class="font-medium"><%= t(".posts_module") %></h3>
                  <p class="text-sm text-muted-foreground"><%= t(".posts_module_description") %></p>
                </div>
                <div class="flex items-center">
                  <%= f.check_box :posts_enabled, class: "h-4 w-4 rounded border-input" %>
                </div>
              </div>

              <div class="flex items-center justify-between p-4 border rounded-lg">
                <div class="flex-1">
                  <h3 class="font-medium"><%= t(".roadmap_module") %></h3>
                  <p class="text-sm text-muted-foreground"><%= t(".roadmap_module_description") %></p>
                </div>
                <div class="flex items-center">
                  <%= f.check_box :roadmap_enabled, class: "h-4 w-4 rounded border-input" %>
                </div>
              </div>

              <div class="flex items-center justify-between p-4 border rounded-lg">
                <div class="flex-1">
                  <h3 class="font-medium"><%= t(".changelog_module") %></h3>
                  <p class="text-sm text-muted-foreground"><%= t(".changelog_module_description") %></p>
                </div>
                <div class="flex items-center">
                  <%= f.check_box :changelog_enabled, class: "h-4 w-4 rounded border-input" %>
                </div>
              </div>
            </div>

            <!-- Warning message -->
            <div class="p-4 bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 rounded-lg">
              <div class="flex items-start gap-2">
                <%= lucide_icon "alert-triangle", class: "h-5 w-5 text-amber-600 dark:text-amber-400 mt-0.5" %>
                <p class="text-sm text-amber-800 dark:text-amber-200">
                  <%= t(".at_least_one_module_warning") %>
                </p>
              </div>
            </div>

            <!-- Default landing page selector -->
            <div class="grid gap-3">
              <%= f.label :root_path_module, t(".default_landing_page") %>
              <%= f.select :root_path_module,
                    options_for_select(
                      enabled_module_options(Current.organization),
                      Current.organization.root_path_module
                    ),
                    {},
                    class: "w-full" %>
              <p class="text-xs text-muted-foreground">
                <%= t(".default_landing_page_hint") %>
              </p>
            </div>
          </div>

          <div class="mt-8 flex items-center justify-end gap-3">
            <%= render_button text: t(".save_changes"), type: :submit, variant: :default %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

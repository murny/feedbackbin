<% content_for :title, @user.name %>

<div class="space-y-8">
  <!-- Header Section -->
  <div class="flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0">
    <div class="space-y-1">
      <h1 class="text-3xl font-bold tracking-tight text-foreground">
        <%= @user.name %>
      </h1>
      <p class="text-muted-foreground">
        <%= t(".description") %>
      </p>
    </div>
    <%= render_button(
      text: t(".back_button"),
      href: admin_users_path,
      variant: :outline
    ) %>
  </div>

  <!-- User Info -->
  <%= render_card(title: t(".user_info_title"), class: "px-6") do %>
    <div class="flex items-start space-x-6">
      <%= render_avatar(
        src: @user.avatar.attached? ? url_for(@user.avatar) : nil,
        alt: @user.name,
        size: :xl,
        fallback: @user.name[0, 2].upcase
      ) %>

      <div class="flex-1 space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h4 class="text-sm font-medium text-foreground mb-2"><%= t(".basic_info_title") %></h4>
            <div class="space-y-2 text-sm">
              <div><strong><%= t(".name_label") %>:</strong> <%= @user.name %></div>
              <div><strong><%= t(".email_label") %>:</strong> <%= @user.email_address %></div>
              <% if @user.username.present? %>
                <div><strong><%= t(".username_label") %>:</strong> @<%= @user.username %></div>
              <% end %>
              <div><strong><%= t(".joined_label") %>:</strong> <%= @user.created_at.strftime("%B %d, %Y") %></div>
            </div>
          </div>

          <div>
            <h4 class="text-sm font-medium text-foreground mb-2"><%= t(".status_title") %></h4>
            <div class="space-y-2">
              <%= render_badge(
                text: @user.super_admin? ? t(".super_admin_badge") : @user.role.humanize,
                variant: @user.administrator? || @user.super_admin? ? :default : :secondary
              ) %>
              <%= render_badge(
                text: @user.email_verified? ? t(".verified_badge") : t(".unverified_badge"),
                variant: @user.email_verified? ? :default : :destructive
              ) %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Role Information -->
  <%= render_card(title: t(".role_title"), class: "px-6") do %>
    <div class="p-4 border border-border rounded-lg">
      <div class="flex items-center justify-between">
        <div>
          <div class="font-medium text-foreground"><%= t(".current_role_label") %></div>
          <div class="text-sm text-muted-foreground">
            <%= t(".role_description") %>
          </div>
        </div>
        <%= render_badge(
          text: @user.role.humanize,
          variant: @user.administrator? ? :default : :secondary
        ) %>
      </div>
    </div>
  <% end %>

  <!-- Recent Posts -->
  <%= render_card(title: t(".recent_posts_title"), class: "px-6") do %>
    <% if @recent_posts.any? %>
      <div class="space-y-4">
        <% @recent_posts.each do |post| %>
          <div class="flex items-start space-x-3 p-3 rounded-lg hover:bg-muted/50 transition-colors">
            <div class="min-w-0 flex-1">
              <div class="font-medium text-foreground truncate"><%= post.title %></div>
              <div class="text-sm text-muted-foreground">
                <%= time_ago_in_words(post.created_at) %> <%= t(".ago") %>
              </div>
              <% if post.category %>
                <%= render_badge(
                  text: post.category.name,
                  variant: :outline
                ) %>
              <% end %>
            </div>
            <div class="text-xs text-muted-foreground">
              <%= pluralize(post.likes_count, t(".like_singular"), t(".like_plural")) %> â€¢ <%= pluralize(post.comments_count, t(".comment_singular"), t(".comment_plural")) %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-8 text-muted-foreground">
        <%= t(".no_posts") %>
      </div>
    <% end %>
  <% end %>
</div>

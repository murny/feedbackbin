<%# locals: (invitations:, pagy:) %>

<% if invitations.any? %>
  <div class="card">
    <ul role="list" class="divide-y">
      <% invitations.each do |invitation| %>
        <li class="flex align-center justify-space-between" style="gap: var(--space-6); padding-block: var(--space-5); padding-inline: var(--space-6);">
          <div class="flex-1" style="min-inline-size: 0;">
            <div class="flex align-start" style="gap: var(--space-3);">
              <div class="flex-1" style="min-inline-size: 0;">
                <p class="txt-small font-weight-semibold" style="line-height: 1.5rem;">
                  <%= invitation.email %>
                  <% if invitation.name.present? %>
                    <span class="txt-subtle font-weight-normal">(<%= invitation.name %>)</span>
                  <% end %>
                </p>
                <div class="flex flex-wrap align-center txt-x-small txt-subtle" style="margin-block-start: var(--space-1); gap: var(--space-2); line-height: 1.25rem;">
                  <p>
                    <%= t(".invited_by") %> <%= invitation.invited_by.name %>
                  </p>
                  <svg viewBox="0 0 2 2" style="inline-size: 0.125rem; block-size: 0.125rem; fill: currentColor;">
                    <circle cx="1" cy="1" r="1" />
                  </svg>
                  <p>
                    <%= time_ago_in_words(invitation.created_at) %> <%= t(".ago") %>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="flex flex-none align-center" style="gap: var(--space-2);">
            <%= button_to_copy_to_clipboard(invitation_url(invitation.token)) do %>
              <%= lucide_icon "copy", class: "size-4" %>
              <span class="visually-hidden"><%= t(".copy_invitation_link") %></span>
            <% end %>
            <%= render Elements::ButtonComponent.new(
              variant: :outline,
              size: :icon,
              href: resend_admin_invitation_path(invitation),
              data: { turbo_method: :post, turbo_confirm: t(".resend_confirm"), tooltip: t(".resend") }
            ) do %>
              <%= lucide_icon "mail", class: "size-4" %>
              <span class="visually-hidden"><%= t(".resend") %></span>
            <% end %>
            <%= render Elements::ButtonComponent.new(
              variant: :destructive,
              size: :icon,
              href: admin_invitation_path(invitation),
              data: { turbo_method: :delete, turbo_confirm: t(".cancel_confirm"), tooltip: t(".cancel_invitation") }
            ) do %>
              <%= lucide_icon "x", class: "size-4" %>
              <span class="visually-hidden"><%= t(".cancel_invitation") %></span>
            <% end %>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
<% else %>
  <div class="card txt-align-center" style="padding: var(--space-8);">
    <%= lucide_icon "mail-check", class: "center txt-subtle", style: "inline-size: 3rem; block-size: 3rem;" %>
    <h3 class="txt-large font-weight-semibold" style="margin-block-start: var(--space-4);"><%= t(".no_invitations_title") %></h3>
    <p class="txt-small txt-subtle" style="margin-block-start: var(--space-2);"><%= t(".no_invitations_description") %></p>
  </div>
<% end %>

<% if pagy.last > 1 %>
  <div class="flex flex-column" style="margin-block-start: var(--space-8); gap: var(--space-4);">
    <div class="txt-align-center txt-small txt-subtle">
      <%== pagy.info_tag %>
    </div>
    <div class="flex justify-center">
      <%== pagy.series_nav(link_extra: 'data-turbo-frame="invitations_content"') %>
    </div>
  </div>
<% end %>

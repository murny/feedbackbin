<% content_for :title, t(".title") %>

<div class="flex flex-column" style="gap: var(--space-8);">
  <div class="flex flex-column" style="gap: var(--space-1);">
    <h1 class="txt-x-large font-weight-bold" style="letter-spacing: -0.025em;">
      <%= t(".heading") %>
    </h1>
    <p class="txt-subtle">
      <%= t(".description") %>
    </p>
  </div>

  <div style="max-inline-size: 28rem;"
       data-controller="search"
       data-search-delay-value="300"
       data-search-loading-class="opacity-75"
       data-search-filtering-class="ring-2 ring-primary">
    <%= form_with url: admin_ideas_path, method: :get,
        data: {
          turbo_frame: "ideas_content",
          search_target: "form"
        } do |form| %>
      <%= form.label :search, t(".search_label"), class: "visually-hidden" %>
      <%= form.search_field :search,
          placeholder: t(".search_placeholder"),
          value: params[:search],
          autocomplete: "off",
          class: "full-width border border-radius txt-small",
          style: "padding-inline: var(--space-4); padding-block: var(--space-2); background-color: var(--color-background);",
          data: {
            search_target: "input",
            action: "input->search#search"
          } %>
    <% end %>
  </div>

  <%= turbo_frame_tag "ideas_content",
      data: { action: "turbo:frame-load->search#searchComplete" } do %>
    <%= render "ideas_list", ideas: @ideas, pagy: @pagy %>
  <% end %>
</div>

<% content_for :title, "Users" %>

<div class="space-y-8">
  <!-- Header Section -->
  <div class="space-y-1">
    <h1 class="text-3xl font-bold tracking-tight text-foreground">
      Users
    </h1>
    <p class="text-muted-foreground">
      Manage all users on the platform
    </p>
  </div>

  <!-- Search Section -->
  <div class="w-full max-w-md"
       data-controller="search"
       data-search-delay-value="300"
       data-search-loading-class="opacity-75"
       data-search-filtering-class="ring-2 ring-primary">
    <%= form_with url: super_admin_users_path, method: :get,
        data: {
          turbo_frame: "users_content",
          search_target: "form"
        } do |form| %>
      <%= form.label :search, "Search users", class: "sr-only" %>
      <%= form.search_field :search,
          placeholder: "Search by name, email, or username...",
          value: params[:search],
          autocomplete: "off",
          class: "w-full px-4 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring transition-colors",
          data: {
            search_target: "input",
            action: "input->search#search"
          } %>
    <% end %>
  </div>

  <!-- Users Content -->
  <%= turbo_frame_tag "users_content",
      data: { action: "turbo:frame-load->search#searchComplete" } do %>
    <%= render "users_list", users: @users, pagy: @pagy %>
  <% end %>
</div>
